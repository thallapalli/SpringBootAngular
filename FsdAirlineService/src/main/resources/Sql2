 
 
-- USER SQL
CREATE USER FSD IDENTIFIED BY fsd ;

-- QUOTAS

-- ROLES
GRANT "DBA" TO FSD WITH ADMIN OPTION;
ALTER USER FSD DEFAULT ROLE "DBA";



CREATE TABLE FSD.FSD_CUSTOMER 
(
  CUSTOMER_ID NUMBER NOT NULL 
, EMAIL VARCHAR2(20) NOT NULL 
, PASSWORD VARCHAR2(20) NOT NULL 
, CONSTRAINT FSD_CUSTOMER_PK PRIMARY KEY 
  (
    ID 
  )
  ENABLE 
);

CREATE TABLE "FSD1"."FLIGHT" 
   (	"FLIGHT_ID" NUMBER(19,0) NOT NULL ENABLE, 
	"AIRLINE" VARCHAR2(255 CHAR), 
	"ARRIVAL_TIME" VARCHAR2(255 CHAR), 
	"DEAPRTURE_TIME" VARCHAR2(255 CHAR), 
	"DEPARTURE_DATE" TIMESTAMP (6), 
	"NUM_OF_PASSENGERS" NUMBER(10,0) NOT NULL ENABLE, 
	"PRICE" NUMBER(19,0), 
	 PRIMARY KEY ("FLIGHT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
  
   CREATE TABLE "FSD1"."BOOKING" 
   (	"BOOKING_ID" NUMBER NOT NULL ENABLE, 
	"FLIGHT_ID" NUMBER, 
	"CUSTOMER_ID" NUMBER, 
	 CONSTRAINT "BOOKING_PK" PRIMARY KEY ("BOOKING_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FK_CUSTOMER_ID" FOREIGN KEY ("CUSTOMER_ID")
	  REFERENCES "FSD1"."CUSTOMER" ("CUSTOMER_ID") ENABLE, 
	 CONSTRAINT "FK_FLIGHT_ID" FOREIGN KEY ("FLIGHT_ID")
	  REFERENCES "FSD1"."FLIGHT" ("FLIGHT_ID") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
  

CREATE SEQUENCE FSD.HIBERNATE_SEQUENCE INCREMENT BY 1 START WITH 1 MAXVALUE 9999999 MINVALUE 1 NOCACHE ORDER;



<! --backup sqls -->


Hibernate: create table fsd.flight (flight_id number(19,0) not null, airline varchar2(255 char), arrival_time varchar2(255 char), deaprture_time varchar2(255 char), departure_date timestamp, num_of_passengers number(10,0) not null, price number(19,0), primary key (flight_id))
Hibernate: create table fsd.fsd_customer (customer_id number(19,0) not null, email varchar2(255 char), password varchar2(255 char), primary key (customer_id))
Hibernate: create sequence hr.hibernate_sequence start with 1 increment by 1

<!-- end of backup sqls -->

<! -- data setup -->

INSERT INTO "FSD1"."CUSTOMER" (CUSTOMER_ID, EMAIL, PASSWORD) VALUES ('1', 'kt@kt.com', 'welcome1')

INSERT INTO "FSD1"."FLIGHT" (FLIGHT_ID, AIRLINE, ARRIVAL_TIME, DEAPRTURE_TIME, DEPARTURE_DATE, NUM_OF_PASSENGERS, PRICE) VALUES ('2', 'southwest', '7.30', '8.30', TO_TIMESTAMP('2018-12-08 22:13:58.924521700', 'YYYY-MM-DD HH24:MI:SS.FF'), '2', '100')
INSERT INTO "FSD1"."FLIGHT" (FLIGHT_ID, AIRLINE, ARRIVAL_TIME, DEAPRTURE_TIME, DEPARTURE_DATE, NUM_OF_PASSENGERS, PRICE) VALUES ('4', 'southwest', '7.30', '8.30', TO_TIMESTAMP('2018-12-08 22:13:58.924521700', 'YYYY-MM-DD HH24:MI:SS.FF'), '2', '100')
INSERT INTO "FSD1"."FLIGHT" (FLIGHT_ID, AIRLINE, ARRIVAL_TIME, DEAPRTURE_TIME, DEPARTURE_DATE, NUM_OF_PASSENGERS, PRICE) VALUES ('6', 'americanairways', '7.30', '8.30', TO_TIMESTAMP('2018-12-08 22:13:58.924521700', 'YYYY-MM-DD HH24:MI:SS.FF'), '2', '100')


 --
 
 troubleshooting
 Type definition error: [simple type, class org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor
 add below
 @JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})
 
 
 
 

  